import numpy as np
import pandas as pd
import seaborn as sns
import matplotlib.pyplot as plt
import io

df= pd.read_csv("/diabetes.csv")

def check_df(dataframe, head=5):
    print("      SHAPE      ")
    print(dataframe.shape)
    print("      TYPE       ")
    print(dataframe.dtypes)
    print("      DUPLICATED VALUES      ")
    print(dataframe.duplicated().sum())
    print("      MISSING VALUES      ")
    print(dataframe.isnull().sum())
    print("      UNIQUE VALUES      ")
    print(df.nunique())

check_df(df)

df.head()

fig, ax = plt.subplots(4,2, figsize=(16,16))
sns.distplot(df.Age, bins = 20, ax=ax[0,0]) 
sns.distplot(df.Pregnancies, bins = 20, ax=ax[0,1]) 
sns.distplot(df.Glucose, bins = 20, ax=ax[1,0]) 
sns.distplot(df.BloodPressure, bins = 20, ax=ax[1,1]) 
sns.distplot(df.SkinThickness, bins = 20, ax=ax[2,0])
sns.distplot(df.Insulin, bins = 20, ax=ax[2,1])
sns.distplot(df.DiabetesPedigreeFunction, bins = 20, ax=ax[3,0]) 
sns.distplot(df.BMI, bins = 20, ax=ax[3,1]) 

#Basics statistics : summarize dataset with descriptives statistics
df.describe()

# TARGET : Diabete or not ?
targets = df.loc[:, "Outcome"].unique()
numberTargerts = df.loc[:, "Outcome"].value_counts().values
#Plot
fig, ax = plt.subplots()
labels = ["Yes", "No"]
ax.pie(numberTargerts, labels = labels, autopct = '%1.1f%%') 
ax.set_title('Diabete ?')
plt.tight_layout()
plt.show()

#plot for pregnancies
figure, axes = plt.subplots(figsize=(12,6))
figure = sns.histplot(data=df, x="Pregnancies", hue="Outcome", multiple="stack", kde=True)
figure.set_title('Distribution of Pregnancies per group')
plt.show()

## Plot for glucose
figure, axes = plt.subplots(figsize=(12,6))
figure = sns.histplot(data=df, x="BloodPressure", hue="Outcome", multiple="stack", kde=True)
figure.set_title('Distribution of BloodPressure per group')
plt.show()

## Plot for insulin
figure, axes = plt.subplots(figsize=(12,6))
figure = sns.histplot(data=df, x="Insulin", hue="Outcome", multiple="stack", kde=True)
figure.set_title('Distribution of Insulin per group')
plt.show()

## Plot for BMI
figure, axes = plt.subplots(figsize=(12,6))
figure = sns.histplot(data=df, x="BMI", hue="Outcome", multiple="stack", kde = True)
figure.set_title('Distribution of BMI per group')
plt.show()
